<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>虚拟机硬件设置</title>
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <script src="./js/jquery-3.6.0.min.js"></script>
    <script src="./js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="./css/virt.css">
    <style>

    </style>
</head>

<body>
    <div class="settings-container">
        <div class="section-title hard-title">硬件</div>
        <div class="row g-0">
            <!-- 左侧设备列表 -->
            <div class="col-md-4 device-list">
                <div class="device-item active" data-device="memory">
                    <div class="fw-bold">内存</div>
                    <div class="device-summary">4GB</div>
                </div>
                <div class="device-item" data-device="processor">
                    <div class="fw-bold">处理器</div>
                    <div class="device-summary">2</div>
                </div>
                <div class="device-item" data-device="cdrom">
                    <div class="fw-bold">新CD/DVD(SATA)</div>
                    <div class="device-summary">正在使用文件 E:\os\ubuntu-...</div>
                </div>
                <div class="device-item" data-device="network">
                    <div class="fw-bold">网络适配器</div>
                    <div class="device-summary">NAT</div>
                </div>
                <div class="device-item" data-device="usb">
                    <div class="fw-bold">USB控制器</div>
                    <div class="device-summary">存在</div>
                </div>
                <div class="device-item" data-device="sound">
                    <div class="fw-bold">声卡</div>
                    <div class="device-summary">自动检测</div>
                </div>
                <div class="device-item" data-device="display">
                    <div class="fw-bold">显示</div>
                    <div class="device-summary">自动检测</div>
                </div>
            </div>

            <!-- 右侧设置面板 -->
            <div class="col-md-8 settings-panel">
                <!-- 【内存】设置面板 -->
                <div class="device-settings" id="memory-settings">
                    <!-- <h4>内存</h4> -->
                    <div class="section-box">
                        <div class="section-title">内存</div>
                        <p class="info-text">指定分配给此虚拟机的内存量。内存大小必须为4MB的倍数。</p>

                        <div class="mb-3">
                            <label for="memorySize" class="form-label">此虚拟机的内存(M):</label>
                            <div class="memory-slider-container">
                                <input type="number" class="form-control memory-input" id="memorySize" value="4096"
                                    min="4" step="4">
                                <input type="range" class="slider" id="memorySlider" min="128" max="128000" value="4096"
                                    step="4">
                            </div>
                        </div>

                        <div class="memory-options">
                            <div class="memory-option" data-value="128000">128GB</div>
                            <div class="memory-option" data-value="64000">64GB</div>
                            <div class="memory-option" data-value="32000">32GB</div>
                            <div class="memory-option" data-value="16000">16GB</div>
                            <div class="memory-option" data-value="8000">8GB</div>
                            <div class="memory-option selected" data-value="4096">4GB</div>
                            <div class="memory-option" data-value="2048">2GB</div>
                            <div class="memory-option" data-value="1024">1GB</div>
                            <div class="memory-option" data-value="512">512MB</div>
                            <div class="memory-option" data-value="256">256MB</div>
                            <div class="memory-option" data-value="128">128MB</div>
                            <div class="memory-option" data-value="64">64MB</div>
                        </div>

                        <div class="mt-3">
                            <div class="info-text">最大建议内存 (超出此大小可能发生内存交换。): <span class="text-success">15.6GB</span>
                            </div>
                            <div class="info-text">建议的最小客户机操作系统内存: <span class="text-warning">2GB</span></div>
                        </div>
                    </div>
                </div>

                <!-- 【处理器】设置面板（默认隐藏） -->
                <div class="device-settings d-none" id="processor-settings">
                    <!-- <h4>处理器设置</h4>
                    <p class="info-text">处理器设置内容将在这里显示</p> -->
                    <div class="settings-panel">
                        <!-- 处理器设置框 -->
                        <div class="section-box">
                            <div class="section-title">处理器</div>
                            <div class="processor-info">
                                <div class="processor-label">处理器数量(P):</div>
                                <input type="number" class="form-control" id="processorCount" value="4" min="1"
                                    max="64">
                            </div>
                            <div class="processor-info">
                                <div class="processor-label">每个处理器的内核数量(C):</div>
                                <input type="number" class="form-control" id="coresPerProcessor" value="2" min="1"
                                    max="16">
                            </div>
                            <div class="processor-info">
                                <div class="processor-label">处理器内核总数:</div>
                                <input type="text" class="form-control" id="totalCores" value="8" readonly>
                                <span class="info-text" style="margin-left: 10px;">(只读)</span>
                            </div>
                        </div>

                        <!-- 虚拟化引擎设置框 -->
                        <div class="section-box">
                            <div class="section-title">虚拟化引擎</div>
                            <div class="checkbox-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="virtualizationVT" checked>
                                    <label class="form-check-label" for="virtualizationVT">
                                        虚拟化 Intel VT-x/EPT 或 AMD-V/RVI(V)
                                    </label>
                                </div>
                            </div>
                            <div class="checkbox-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="virtualizationCPU">
                                    <label class="form-check-label" for="virtualizationCPU">
                                        虚拟化 CPU 性能计数器(U)
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 【CD/DVD 驱动器】设置面板（默认隐藏） -->
                <div class="device-settings d-none" id="cdrom-settings">
                    <!-- <h4>CD/DVD 驱动器设置</h4>
                    <p class="info-text">CD/DVD 驱动器设置内容将在这里显示</p> -->
                    <div class="settings-panel">
                        <!-- 设备状态设置框 -->
                        <div class="section-box">
                            <div class="section-title">设备状态</div>
                            <div class="checkbox-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="connected">
                                    <label class="form-check-label" for="connected">
                                        已连接(C)
                                    </label>
                                </div>
                            </div>
                            <div class="checkbox-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="connectAtPowerOn" checked>
                                    <label class="form-check-label" for="connectAtPowerOn">
                                        启动时连接(O)
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- 连接设置框 -->
                        <div class="section-box">
                            <div class="section-title">连接</div>
                            <div class="radio-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="connectionType"
                                        id="physicalDrive" checked>
                                    <label class="form-check-label" for="physicalDrive">
                                        使用物理驱动器(P):
                                    </label>
                                    <div class="drive-options">
                                        <select class="form-control user-defined-form-control" id="driveSelector">
                                            <option>自动检测</option>
                                            <option>D: DVD驱动器</option>
                                            <option>E: CD驱动器</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="radio-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="connectionType" id="isoImage">
                                    <label class="form-check-label" for="isoImage">
                                        使用ISO映像文件(M):
                                    </label>
                                    <div class="iso-options">
                                        <button class="btn btn-outline-secondary btn-sm"
                                            id="browseBtn">浏览(B)...</button>
                                        <span class="iso-path" id="isoPath">未选择</span>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-3">
                                <button class="btn btn-outline-secondary" id="advancedBtn">高级(V)...</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 【网络适配器】设置设置面板（默认隐藏） -->
                <div class="device-settings d-none" id="network-settings">
                    <!-- <h4>网络适配器设置</h4>
                    <p class="info-text">网络适配器内容将在这里显示</p> -->
                    <div class="settings-panel">
                        <!-- 设备状态设置框 -->
                        <div class="section-box">
                            <div class="section-title">设备状态</div>
                            <div class="checkbox-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="connected">
                                    <label class="form-check-label" for="connected">
                                        已连接(C)
                                    </label>
                                </div>
                            </div>
                            <div class="checkbox-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="connectAtPowerOn" checked>
                                    <label class="form-check-label" for="connectAtPowerOn">
                                        启动时连接(O)
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- 网络连接设置框 -->
                        <div class="section-box">
                            <div class="section-title">网络连接</div>
                            <div class="radio-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="networkType" id="bridgedMode">
                                    <label class="form-check-label" for="bridgedMode">
                                        桥接模式(B):直接连接物理网络
                                    </label>
                                </div>
                            </div>
                            <div class="radio-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="networkType"
                                        id="copyPhysicalState">
                                    <label class="form-check-label" for="copyPhysicalState">
                                        复制物理网络连接状态(P)
                                    </label>
                                </div>
                            </div>
                            <div class="radio-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="networkType" id="natMode"
                                        checked>
                                    <label class="form-check-label" for="natMode">
                                        NAT 模式(N):用于共享主机的IP地址
                                    </label>
                                </div>
                            </div>
                            <div class="radio-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="networkType" id="hostOnlyMode">
                                    <label class="form-check-label" for="hostOnlyMode">
                                        仅主机模式(H):与主机共享的专用网络
                                    </label>
                                </div>
                            </div>
                            <div class="radio-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="networkType" id="customMode">
                                    <label class="form-check-label" for="customMode">
                                        自定义(U):特定虚拟网络
                                    </label>
                                    <div class="custom-network">
                                        <select class="form-control user-defined-form-control" id="networkSelector">
                                            <option>VMnet0 (桥接模式)</option>
                                            <option>VMnet1 (仅主机模式)</option>
                                            <option>VMnet8 (NAT 模式)</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="radio-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="networkType" id="lanSegmentMode">
                                    <label class="form-check-label" for="lanSegmentMode">
                                        LAN 区段(L):
                                    </label>
                                </div>
                            </div>
                            <div class="mt-3">
                                <button class="btn btn-outline-secondary" id="lanSegmentBtn">LAN 区段(S)...</button>
                                <button class="btn btn-outline-secondary" id="networkAdvancedBtn">高级(V)...</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 【USB控制器】设置面板（默认隐藏） -->
                <div class="device-settings d-none" id="usb-settings">
                    <!-- <h4>USB控制器设置</h4>
                    <p class="info-text">USB控制器内容将在这里显示</p> -->
                    <div class="settings-panel">
                        <!-- 连接设置框 -->
                        <div class="section-box">
                            <div class="section-title">连接</div>
                            <div class="usb-compatibility">
                                <div class="usb-label">USB 兼容性(C):</div>
                                <select class="form-control user-defined-form-control" id="usbCompatibility">
                                    <option>USB 1.1</option>
                                    <option selected>USB 2.0</option>
                                    <option>USB 3.0</option>
                                    <option>USB 3.1</option>
                                </select>
                            </div>
                            <div class="checkbox-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="showAllUsb">
                                    <label class="form-check-label" for="showAllUsb">
                                        显示所有 USB 输入设备(S)
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 【声卡控制器】设置面板（默认隐藏） -->
                <div class="device-settings d-none" id="sound-settings">
                    <!-- <h4>声卡控制器设置</h4>
                    <p class="info-text">声卡控制器内容将在这里显示</p> -->
                    <div class="settings-panel">
                        <!-- 设备状态设置框 -->
                        <div class="section-box">
                            <div class="section-title">设备状态</div>
                            <div class="checkbox-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="connected">
                                    <label class="form-check-label" for="connected">
                                        已连接(C)
                                    </label>
                                </div>
                            </div>
                            <div class="checkbox-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="connectAtPowerOn" checked>
                                    <label class="form-check-label" for="connectAtPowerOn">
                                        启动时连接(O)
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- 连接设置框 -->
                        <div class="section-box">
                            <div class="section-title">连接</div>
                            <div class="radio-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="soundCardType"
                                        id="defaultSoundCard">
                                    <label class="form-check-label" for="defaultSoundCard">
                                        使用默认主机声卡(D)
                                    </label>
                                </div>
                            </div>
                            <div class="radio-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="soundCardType"
                                        id="specificSoundCard" checked>
                                    <label class="form-check-label" for="specificSoundCard">
                                        指定主机声卡(S)
                                    </label>
                                    <div class="sound-card-options">
                                        <select class="form-control user-defined-form-control" id="soundCardSelector">
                                            <option>耳机 (Realtek(R) Audio)</option>
                                            <option>扬声器 (Realtek(R) Audio)</option>
                                            <option>数字音频 (S/PDIF) (Realtek(R) Audio)</option>
                                            <option>麦克风 (Realtek(R) Audio)</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 回声抵消设置框 -->
                        <div class="section-box">
                            <div class="section-title">回声抵消</div>
                            <div class="checkbox-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="echoCancellation">
                                    <label class="form-check-label" for="echoCancellation">
                                        启用回声抵消(E)
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 【显示控制器】设置面板（默认隐藏） -->
                <div class="device-settings d-none" id="display-settings">
                    <!-- <h4>显示控制器设置</h4>
                    <p class="info-text">显示控制器内容将在这里显示</p> -->
                    <div class="settings-panel">
                        <!-- 3D图形设置框 -->
                        <div class="section-box">
                            <div class="section-title">3D 图形</div>
                            <div class="checkbox-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="accelerate3D" checked>
                                    <label class="form-check-label" for="accelerate3D">
                                        加速 3D 图形(3)
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- 监视器设置框 -->
                        <div class="section-box">
                            <div class="section-title">监视器</div>
                            <div class="radio-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="monitorSetting"
                                        id="useHostSetting" checked>
                                    <label class="form-check-label" for="useHostSetting">
                                        将主机设置用于监视器(U)
                                    </label>
                                </div>
                            </div>
                            <div class="radio-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="monitorSetting"
                                        id="specifyMonitorSetting">
                                    <label class="form-check-label" for="specifyMonitorSetting">
                                        指定监视器设置(S):
                                    </label>
                                    <div class="monitor-options">
                                        <div class="monitor-setting">
                                            <div class="monitor-label">监视器数量(N):</div>
                                            <select class="form-control" id="monitorCount">
                                                <option>1</option>
                                                <option>2</option>
                                                <option>3</option>
                                                <option>4</option>
                                            </select>
                                        </div>
                                        <div class="monitor-setting">
                                            <div class="monitor-label">任意监视器最大分辨率:</div>
                                            <select class="form-control user-defined-form-control" id="maxResolution">
                                                <option>800 x 600</option>
                                                <option>1024 x 768</option>
                                                <option>1280 x 1024</option>
                                                <option>1920 x 1080</option>
                                                <option>2560 x 1440</option>
                                                <option selected>2560 x 1600</option>
                                                <option>3840 x 2160</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 图形内存设置框 -->
                        <div class="section-box">
                            <div class="section-title">图形内存</div>
                            <div class="monitor-setting">
                                <div class="monitor-label">Guest显示内存可用最大量:</div>
                                <select class="form-control user-defined-form-control" id="graphicsMemory">
                                    <option>1 GB</option>
                                    <option>2 GB</option>
                                    <option>4 GB</option>
                                    <option selected>8 GB (推荐)</option>
                                    <option>16 GB</option>
                                </select>
                            </div>
                            <div class="warning-text">
                                除非总系统内存增加到16 GB，否则虚拟机可能无法使用所有已配置的图形内存。可以在"内存设置"页面中调整虚拟机的总内存。
                            </div>
                        </div>

                        <!-- 显示缩放比例设置框 -->
                        <div class="section-box">
                            <div class="section-title">显示缩放比例</div>
                            <div class="checkbox-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="stretchMode">
                                    <label class="form-check-label" for="stretchMode">
                                        拉伸模式(I):
                                    </label>
                                </div>
                            </div>
                            <div class="stretch-options">
                                <div class="radio-group">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="stretchOption"
                                            id="keepAspectRatio">
                                        <label class="form-check-label" for="keepAspectRatio">
                                            保持纵横比拉伸(K)
                                        </label>
                                        <div class="info-text">拉伸虚拟机显示并保持用户界面纵横比</div>
                                    </div>
                                </div>
                                <div class="radio-group">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="stretchOption"
                                            id="freeStretch">
                                        <label class="form-check-label" for="freeStretch">
                                            自由拉伸(E)
                                        </label>
                                        <div class="info-text">拉伸虚拟机显示以填充用户界面，而不保持用户界面纵横比</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- 底部四个按钮 -->
        <div class="button-container">
            <button class="btn btn-outline-secondary btn-custom">添加(A)...</button>
            <button class="btn btn-outline-secondary btn-custom">移除</button>
            <button class="btn btn-primary btn-custom">关闭</button>
            <button class="btn btn-outline-secondary btn-custom">帮助</button>
        </div>
    </div>


    <!-- CD/DVD: ISO浏览模态框 -->
    <div class="modal fade" id="isoModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">选择ISO映像文件</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="isoFile" class="form-label">选择ISO文件:</label>
                        <input type="file" class="form-control" id="isoFile" accept=".iso">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">或从最近使用的文件中选择:</label>
                        <div class="list-group">
                            <button type="button"
                                class="list-group-item list-group-item-action">E:\os\ubuntu-20.04.iso</button>
                            <button type="button"
                                class="list-group-item list-group-item-action">E:\os\windows10.iso</button>
                            <button type="button"
                                class="list-group-item list-group-item-action">D:\downloads\debian.iso</button>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="confirmIso">确定</button>
                </div>
            </div>
        </div>
    </div>

    <!-- CD/DVD:高级设置模态框 -->
    <div class="modal fade" id="advancedModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">CD/DVD高级设置</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="section-box">
                        <div class="section-title">虚拟设备节点</div>
                        <div class="radio-group">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="deviceNode" id="sataOption" checked>
                                <label class="form-check-label" for="sataOption">
                                    SATA(A)
                                </label>
                                <div class="device-node-options">
                                    <select class="form-control  user-defined-form-control" id="sataSelector">
                                        <option>SATA 0:1 新 CD/DVD (SATA)</option>
                                        <option>SATA 0:2</option>
                                        <option>SATA 0:3</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="radio-group">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="deviceNode" id="scsiOption">
                                <label class="form-check-label" for="scsiOption">
                                    SCSI(S)
                                </label>
                                <div class="device-node-options">
                                    <select class="form-control user-defined-form-control" id="scsiSelector">
                                        <option>SCSI 0:0 (已预留)</option>
                                        <option>SCSI 0:1</option>
                                        <option>SCSI 0:2</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="radio-group">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="deviceNode" id="ideOption">
                                <label class="form-check-label" for="ideOption">
                                    IDE(D)
                                </label>
                                <div class="device-node-options">
                                    <select class="form-control  user-defined-form-control" id="ideSelector">
                                        <option>IDE 0:0</option>
                                        <option>IDE 0:1</option>
                                        <option>IDE 1:0</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="section-box mt-3">
                        <div class="section-title">故障排除</div>
                        <div class="checkbox-group">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="legacyEmulation">
                                <label class="form-check-label" for="legacyEmulation">
                                    旧版仿真(L)
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">确定</button>
                    <button type="button" class="btn btn-outline-secondary">帮助</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 网络：LAN区段模态框 -->
    <div class="modal fade" id="lanSegmentModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">全局 LAN 区段</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">全局 LAN 区段(G):</label>
                        <div class="lan-segment-list" id="lanSegmentList">
                            <!-- LAN区段列表项将通过JS动态添加 -->
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" id="addLanSegment">添加(A)</button>
                    <button type="button" class="btn btn-outline-secondary" id="renameLanSegment">重命名(R)</button>
                    <button type="button" class="btn btn-outline-secondary" id="removeLanSegment">移除(E)</button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">确定</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 网络：高级设置模态框 -->
    <div class="modal fade" id="networkAdvancedModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">网络适配器高级设置</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="advanced-settings">
                        <div class="advanced-section">
                            <div class="advanced-title">传入传输</div>
                            <div class="mb-3">
                                <label class="form-label">带宽(B):</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="incomingBandwidth"
                                        id="incomingUnlimited" checked>
                                    <label class="form-check-label" for="incomingUnlimited">
                                        不受限
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="incomingBandwidth"
                                        id="incomingLimited">
                                    <label class="form-check-label" for="incomingLimited">
                                        受限
                                    </label>
                                </div>
                                <input type="number" class="form-control mt-2 user-defined-form-control"
                                    id="incomingKbps" placeholder="Kbps(K)" disabled>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">数据包丢失(%)(P):</label>
                                <input type="number" class="form-control " value="0.0" step="0.1" min="0" max="100">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">延迟(毫秒)(T):</label>
                                <input type="number" class="form-control" value="0" min="0">
                            </div>
                        </div>

                        <div class="advanced-section">
                            <div class="advanced-title">传出传输</div>
                            <div class="mb-3">
                                <label class="form-label">带宽(A):</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="outgoingBandwidth"
                                        id="outgoingUnlimited" checked>
                                    <label class="form-check-label" for="outgoingUnlimited">
                                        不受限
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="outgoingBandwidth"
                                        id="outgoingLimited">
                                    <label class="form-check-label" for="outgoingLimited">
                                        受限
                                    </label>
                                </div>
                                <input type="number" class="form-control mt-2 user-defined-form-control"
                                    id="outgoingKbps" placeholder="Kbps(S)" disabled>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">数据包丢失(%)(L):</label>
                                <input type="number" class="form-control" value="0.0" step="0.1" min="0" max="100">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">延迟(毫秒)(E):</label>
                                <input type="number" class="form-control" value="0" min="0">
                            </div>
                        </div>
                    </div>

                    <div class="mac-address mt-4">
                        <label class="form-label me-2">MAC 地址(M):</label>
                        <input type="text" class="form-control me-2" style="width: 160px;" value="00:50:56:XX:XX:XX">
                        <button class="btn btn-outline-secondary">生成(G)</button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">确定</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-outline-secondary">帮助</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function () {
            // 【左边框】设备选择切换
            $('.device-item').click(function () {
                $('.device-item').removeClass('active');
                $(this).addClass('active');

                var device = $(this).data('device');
                $('.device-settings').addClass('d-none');
                $('#' + device + '-settings').removeClass('d-none');
            });

            // 【内存】选项点击
            $('.memory-option').click(function () {
                $('.memory-option').removeClass('selected');
                $(this).addClass('selected');

                var memoryValue = $(this).data('value');
                $('#memorySize').val(memoryValue);
                $('#memorySlider').val(memoryValue);
            });

            // 滑块和输入框同步
            $('#memorySlider').on('input', function () {
                $('#memorySize').val($(this).val());
                updateMemorySelection($(this).val());
            });

            $('#memorySize').on('input', function () {
                var value = $(this).val();
                $('#memorySlider').val(value);
                updateMemorySelection(value);
            });

            function updateMemorySelection(value) {
                $('.memory-option').removeClass('selected');

                $('.memory-option').each(function () {
                    if ($(this).data('value') == value) {
                        $(this).addClass('selected');
                    }
                });
            }
            // 【处理器】
            // 计算处理器内核总数
            function calculateTotalCores() {
                var processorCount = parseInt($('#processorCount').val());
                var coresPerProcessor = parseInt($('#coresPerProcessor').val());
                var totalCores = processorCount * coresPerProcessor;
                $('#totalCores').val(totalCores);
            }

            // 初始化计算
            calculateTotalCores();

            // 处理器数量变化时重新计算
            $('#processorCount').on('input', function () {
                calculateTotalCores();
            });

            // 每个处理器的内核数量变化时重新计算
            $('#coresPerProcessor').on('input', function () {
                calculateTotalCores();
            });

            // 【新CD/DVD(SATA)】
            // 浏览按钮点击事件
            $('#browseBtn').click(function () {
                $('#isoModal').modal('show');
            });

            // 高级按钮点击事件
            $('#advancedBtn').click(function () {
                $('#advancedModal').modal('show');
            });

            // 确认ISO文件选择
            $('#confirmIso').click(function () {
                var fileInput = document.getElementById('isoFile');
                if (fileInput.files.length > 0) {
                    $('#isoPath').text(fileInput.files[0].name);
                } else {
                    $('#isoPath').text('E:\\os\\ubuntu-20.04.iso');
                }
                $('#isoModal').modal('hide');
                $('#isoImage').prop('checked', true);
            });

            // 最近文件选择
            $('.list-group-item').click(function () {
                $('#isoPath').text($(this).text());
                $('#isoModal').modal('hide');
                $('#isoImage').prop('checked', true);
            });

            // 文件输入变化
            $('#isoFile').change(function () {
                if (this.files.length > 0) {
                    $('#isoPath').text(this.files[0].name);
                }
            });

            //【网络适配器】
            // LAN区段按钮点击事件
            $('#lanSegmentBtn').click(function () {
                $('#lanSegmentModal').modal('show');
            });

            // 高级按钮点击事件
            $('#networkAdvancedBtn').click(function () {
                $('#networkAdvancedModal').modal('show');
            });

            // 初始化LAN区段列表
            var lanSegments = ["LAN区段1", "LAN区段2", "LAN区段3"];
            var lanSegmentList = $('#lanSegmentList');

            lanSegments.forEach(function (segment) {
                lanSegmentList.append('<div class="lan-segment-item">' + segment + '</div>');
            });

            // LAN区段项点击事件
            $(document).on('click', '.lan-segment-item', function () {
                $('.lan-segment-item').removeClass('selected');
                $(this).addClass('selected');
            });

            // 添加LAN区段
            $('#addLanSegment').click(function () {
                var newSegment = "LAN区段" + (lanSegments.length + 1);
                lanSegments.push(newSegment);
                lanSegmentList.append('<div class="lan-segment-item">' + newSegment + '</div>');
            });

            // 重命名LAN区段
            $('#renameLanSegment').click(function () {
                var selected = $('.lan-segment-item.selected');
                if (selected.length) {
                    var newName = prompt("请输入新的名称:", selected.text());
                    if (newName) {
                        selected.text(newName);
                    }
                } else {
                    alert("请先选择一个LAN区段");
                }
            });

            // 移除LAN区段
            $('#removeLanSegment').click(function () {
                var selected = $('.lan-segment-item.selected');
                if (selected.length) {
                    selected.remove();
                } else {
                    alert("请先选择一个LAN区段");
                }
            });

            // 带宽限制切换
            $('input[name="incomingBandwidth"]').change(function () {
                $('#incomingKbps').prop('disabled', !$('#incomingLimited').is(':checked'));
            });

            $('input[name="outgoingBandwidth"]').change(function () {
                $('#outgoingKbps').prop('disabled', !$('#outgoingLimited').is(':checked'));
            });
            //【usb控制器】
            $('#usbCompatibility').val('USB 2.0');
            //【声卡】
            $('#specificSoundCard').prop('checked', true);
            $('#connectAtPowerOn').prop('checked', true);
            //【显示】
            // 初始化设置
            $('#accelerate3D').prop('checked', true);
            $('#useHostSetting').prop('checked', true);
            $('#monitorCount').val('1');
            $('#maxResolution').val('2560 x 1600');
            $('#graphicsMemory').val('8 GB (推荐)');
            
            // 当选择"指定监视器设置"时启用下拉框
            $('input[name="monitorSetting"]').change(function() {
                if ($('#specifyMonitorSetting').is(':checked')) {
                    $('#monitorCount').prop('disabled', false);
                    $('#maxResolution').prop('disabled', false);
                } else {
                    $('#monitorCount').prop('disabled', true);
                    $('#maxResolution').prop('disabled', true);
                }
            });
            
            // 当选择"拉伸模式"时启用单选框
            $('#stretchMode').change(function() {
                if ($(this).is(':checked')) {
                    $('input[name="stretchOption"]').prop('disabled', false);
                } else {
                    $('input[name="stretchOption"]').prop('disabled', true);
                }
            });
            
            // 初始化禁用状态
            $('#monitorCount').prop('disabled', true);
            $('#maxResolution').prop('disabled', true);
            $('input[name="stretchOption"]').prop('disabled', true);
        });
    </script>
</body>

</html>